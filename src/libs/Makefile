SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_cortex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_dma.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_dma_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_flash.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_flash_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_flash_ramfunc.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_gpio.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_pwr.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_pwr_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_rcc.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_rcc_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_rtc.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_rtc_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_tim.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_tim_ex.c
SRC += libs/STM32F4xx_HAL_Driver/Src/stm32f4xx_hal_uart.c
SRC += libs/CMSIS/Device/ST/STM32F4xx/Source/Templates/system_stm32f4xx.c

#These files are generated by stm32cubemx, so the warnings are of no interest
$(ASMDIR)/libs/%.s: $(SRCDIR)/libs/%.c
	$(VECHO) "Compiling $<"
	@$(MKDIR_P) $(@D) $(subst asm,dep,$(@D))
	$(CC) $(CFLAGS) -w $(MFLAGS) -MD -MP -x c $(INCLUDES) -S $< -o $@
	@mv $(subst .s,.d,$@) $(subst asm,dep,$(subst .s,.d,$@))
